<!DOCTYPE html>
<html>
<head>
	<title>BioTree | Home</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" 
		integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.0/angular.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
	
	<script type="text/javascript" src="../vendor/app.js"></script>
	
	<!-- controller files -->
	<script type="text/javascript" src="../controller/profileController.js"></script>

	<!-- css files -->
	<link rel="stylesheet" href="../css/backgroundImage.css">
	<link rel="stylesheet" href="../css/table.css">

</head>
<body>
	<section class="intro">
		<div class="bg-image h-100">
			<div ng-app="myapp">
				<div class="container" ng-controller="profilecontroller">
					<div class="row py-5">
						<div class="col-6">
							<h2>Links of {{loggedInUserName}}</h2>
						</div>
						<div class="col-6 text-right">
							<button class="btn btn-success" data-toggle="modal" data-target="#addLinkModal">Add new link</button>
							<button class="btn btn-danger" type="button" ng-click="logout()">Logout</button>
						</div>
					</div>

		  			<div class="mask d-flex">
						<div class="container">
			  				<div class="row justify-content-center">
								<div class="col-12">
				  					<div class="card mask-custom">
										<div class="card-body">
					  						<div class="table-responsive">
						  						<div class="table-wrapper-scroll-y my-custom-scrollbar">
													<table class="table table-borderless text-white mb-0">
						  								<thead>
															<tr>
																<th scope="col">Link's image</th>
																<th scope="col">Actual Link</th>
																<th scope="col">Total view per link</th>
																<th scope="col">Action</th>
															</tr>
						  								</thead>
														<tbody>
															<tr ng-repeat="link in links">
																<td>
																	<div class="col-2">
																		<img style="height:50px;" src="{{link.linkImage}}" alt="img">
																		<!-- onerror="this.src='../linkimages/img-icon.svg'" -->
																	</div>
																</td>
																<td>{{link.url}}</td>
																<td class="text-center">{{link.clicks}}</td>
																<td>
																	<button ng-click="passLinkInfo(link._id, link.linkTitle, link.url)" class="btn btn-primary" 
																		data-toggle="modal" data-target="#updateLinkModal">
																		<i class="fa fa-pencil" aria-hidden="true"></i>
																	</button>
																	<button class="btn btn-danger"><i class="fa fa-trash" aria-hidden="true"></i></button>
																</td>
															</tr>
														</tbody>
													</table>
												</div>
					 						</div>
										</div>
				 					</div>
								</div>
			  				</div>
						</div>
		 			</div>
				</div>
			</div>
		</div>
	</section>

	<%- include('./modal/addLink.ejs') %>
	<%- include('./modal/updateLink.ejs') %>

</body>
</html>